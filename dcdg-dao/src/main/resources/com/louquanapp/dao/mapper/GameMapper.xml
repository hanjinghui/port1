<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.louquanapp.dao.mapper.GameMapper">
    <resultMap id="BaseResultMap" type="com.louquanapp.dao.model.Game">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        <id column="GAME_ID" jdbcType="CHAR" property="gameId"/>
        <result column="GAME_NAME" jdbcType="VARCHAR" property="gameName"/>
        <result column="GAME_IMG" jdbcType="VARCHAR" property="gameImg"/>
        <result column="GAME_URL" jdbcType="VARCHAR" property="gameUrl"/>
        <result column="GAME_PEOPLE_NUM" jdbcType="INTEGER" property="gamePeopleNum"/>
        <result column="GAME_SEQUENCE" jdbcType="INTEGER" property="gameSequence"/>
        <result column="GAME_STATUS" jdbcType="TINYINT" property="gameStatus"/>
        <result column="ADD_TIME" jdbcType="TIMESTAMP" property="addTime"/>
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="GAME_CAT" jdbcType="TINYINT" property="gameCat"/>
        <result column="IS_REC" jdbcType="TINYINT" property="isRec"/>
        <result column="REC_IMG" jdbcType="VARCHAR" property="recImg"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        delete from dcdg_basic_game_base
        where GAME_ID = #{gameId,jdbcType=CHAR}
    </delete>
    <insert id="insert" parameterType="com.louquanapp.dao.model.Game">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        insert into dcdg_basic_game_base (GAME_ID, GAME_NAME, GAME_IMG,
        GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE,
        GAME_STATUS, ADD_TIME, UPDATE_TIME,
        GAME_CAT, IS_REC, REC_IMG
        )
        values (#{gameId,jdbcType=CHAR}, #{gameName,jdbcType=VARCHAR}, #{gameImg,jdbcType=VARCHAR},
        #{gameUrl,jdbcType=VARCHAR}, #{gamePeopleNum,jdbcType=INTEGER}, #{gameSequence,jdbcType=INTEGER},
        #{gameStatus,jdbcType=TINYINT}, #{addTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP},
        #{gameCat,jdbcType=TINYINT}, #{isRec,jdbcType=TINYINT}, #{recImg,jdbcType=VARCHAR}
        )
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.louquanapp.dao.model.Game">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        update dcdg_basic_game_base
        set GAME_NAME = #{gameName,jdbcType=VARCHAR},
        GAME_IMG = #{gameImg,jdbcType=VARCHAR},
        GAME_URL = #{gameUrl,jdbcType=VARCHAR},
        GAME_PEOPLE_NUM = #{gamePeopleNum,jdbcType=INTEGER},
        GAME_SEQUENCE = #{gameSequence,jdbcType=INTEGER},
        GAME_STATUS = #{gameStatus,jdbcType=TINYINT},
        ADD_TIME = #{addTime,jdbcType=TIMESTAMP},
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
        GAME_CAT = #{gameCat,jdbcType=TINYINT},
        IS_REC = #{isRec,jdbcType=TINYINT},
        REC_IMG = #{recImg,jdbcType=VARCHAR}
        where GAME_ID = #{gameId,jdbcType=CHAR}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        select GAME_ID, GAME_NAME, GAME_IMG, GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE, GAME_STATUS,
        ADD_TIME, UPDATE_TIME, GAME_CAT, IS_REC, REC_IMG
        from dcdg_basic_game_base
        where GAME_ID = #{gameId,jdbcType=CHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue May 07 19:54:41 CST 2019.
        -->
        select GAME_ID, GAME_NAME, GAME_IMG, GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE, GAME_STATUS,
        ADD_TIME, UPDATE_TIME, GAME_CAT, IS_REC, REC_IMG
        from dcdg_basic_game_base
    </select>
    <!--查询游戏列表-->
    <select id="queryGameList" resultMap="BaseResultMap">
        select GAME_ID, GAME_NAME, GAME_IMG, GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE
        from dcdg_basic_game_base where GAME_STATUS = 1
        <if test="null!= catId and catId !='' ">
            AND GAME_CAT=#{catId,jdbcType=CHAR}
        </if>

    </select>
    <select id="queryGameListByCustId" resultMap="BaseResultMap">
        select GAME_ID, GAME_NAME, GAME_IMG, GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE
        from dcdg_basic_game_base
        <where>
            <if test="null!= catId and catId !='' ">
                AND GAME_CAT=#{catId,jdbcType=CHAR}
            </if>
            <if test="null!= custId and custId !='' ">
                AND GAME_ID in( select SOURCE_ID from dcdg_customer_attention_base where ATTENTION_TYPE=7 and
                CUST_ID=#{custId})
            </if>
        </where>

    </select>
    <select id="selectAllRec" resultMap="BaseResultMap">
        select GAME_ID, GAME_NAME, GAME_IMG, GAME_URL, GAME_PEOPLE_NUM, GAME_SEQUENCE,REC_IMG
    from dcdg_basic_game_base  where  GAME_STATUS = 1 and IS_REC=1 order by  GAME_SEQUENCE desc  limit 4
  </select>
</mapper>