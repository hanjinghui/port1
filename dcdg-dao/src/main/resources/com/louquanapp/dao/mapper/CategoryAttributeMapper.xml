<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.louquanapp.dao.mapper.CategoryAttributeMapper">
  <resultMap id="BaseResultMap" type="com.louquanapp.dao.model.CategoryAttribute">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    <id column="CA_ID" jdbcType="CHAR" property="caId" />
    <result column="ATTR_ID" jdbcType="CHAR" property="attrId" />
    <result column="CAT_ID" jdbcType="CHAR" property="catId" />
    <result column="ADD_TIME" jdbcType="TIMESTAMP" property="addTime" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    delete from dcdg_goods_category_attribute
    where CA_ID = #{caId,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="com.louquanapp.dao.model.CategoryAttribute">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    insert into dcdg_goods_category_attribute (CA_ID, ATTR_ID, CAT_ID, ADD_TIME
      )
    values (#{caId,jdbcType=CHAR}, #{attrId,jdbcType=CHAR}, #{catId,jdbcType=CHAR}, #{addTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.louquanapp.dao.model.CategoryAttribute">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    update dcdg_goods_category_attribute
    set ATTR_ID = #{attrId,jdbcType=CHAR},
      CAT_ID = #{catId,jdbcType=CHAR},
      ADD_TIME = #{addTime,jdbcType=TIMESTAMP}
    where CA_ID = #{caId,jdbcType=CHAR}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    select CA_ID, ATTR_ID, CAT_ID, ADD_TIME
    from dcdg_goods_category_attribute
    where CA_ID = #{caId,jdbcType=CHAR}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 18 19:54:43 CST 2019.
    -->
    select CA_ID, ATTR_ID, CAT_ID, ADD_TIME
    from dcdg_goods_category_attribute
  </select>
  <resultMap type="com.louquanapp.dao.model.CategoryAttribute"
             id="attrOptionByCatId" extends="BaseResultMap">
    <result column="ATTR_NAME" property="attrName" jdbcType="VARCHAR" />
    <result column="INPUT_TYPE" property="inputType" jdbcType="VARCHAR" />
    <result column="IS_MUST" property="isMust" jdbcType="TINYINT" />
    <collection property="attrOptionList" column="ATTR_ID"
                select="com.louquanapp.dao.mapper.AttributeOptionMapper.getByAttrId"></collection>
  </resultMap>
  <select id="getAttrOptionByCatId" resultMap="attrOptionByCatId"
          parameterType="String">
		SELECT T1.ATTR_ID,T2.INPUT_TYPE,T2.ATTR_NAME,T2.IS_MUST
		FROM
		dcdg_goods_category_attribute T1 LEFT JOIN
		dcdg_goods_attribute_base T2
		ON T1.ATTR_ID = T2.ATTR_ID
		WHERE T1.CAT_ID =
		#{catId}
	</select>
</mapper>