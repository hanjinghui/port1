<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.louquanapp.dao.mapper.OrderItemMapper">
    <resultMap id="BaseResultMap" type="com.louquanapp.dao.model.OrderItem">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        <id column="CHILD_ID" jdbcType="CHAR" property="childId"/>
        <result column="ORDER_ID" jdbcType="CHAR" property="orderId"/>
        <result column="GOODS_ID" jdbcType="CHAR" property="goodsId"/>
        <result column="GOODS_NAME" jdbcType="VARCHAR" property="goodsName"/>
        <result column="GOODS_IMG" jdbcType="VARCHAR" property="goodsImg"/>
        <result column="SKU_NO" jdbcType="VARCHAR" property="skuNo"/>
        <result column="SKU_VALUE" jdbcType="VARCHAR" property="skuValue"/>
        <result column="SUPPLY_PRICE" jdbcType="DOUBLE" property="supplyPrice"/>
        <result column="PUTAWAY_PRICE" jdbcType="DOUBLE" property="putawayPrice"/>
        <result column="GOODS_NUM" jdbcType="INTEGER" property="goodsNum"/>
        <result column="TOTAL_FEE" jdbcType="DOUBLE" property="totalFee"/>
        <result column="ADJUST_FEE" jdbcType="DOUBLE" property="adjustFee"/>
        <result column="DISCOUNTS_FEE" jdbcType="DOUBLE" property="discountsFee"/>
        <result column="DISCOUNTS_DESC" jdbcType="VARCHAR" property="discountsDesc"/>
        <result column="POST_FEE" jdbcType="DOUBLE" property="postFee"/>
        <result column="INSTALL_FEE" jdbcType="DOUBLE" property="installFee"/>
        <result column="DISTRIBUTOR_ID" jdbcType="VARCHAR" property="distributorId"/>
        <result column="ADD_TIME" jdbcType="TIMESTAMP" property="addTime"/>
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="POST_COMPANY" jdbcType="VARCHAR" property="postCompany"/>
        <result column="POST_NO" jdbcType="VARCHAR" property="postNo"/>
        <result column="CAT_PATH" jdbcType="VARCHAR" property="catPath"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        delete from dcdg_bussiness_order_item
        where CHILD_ID = #{childId,jdbcType=CHAR}
    </delete>
    <insert id="insert" parameterType="com.louquanapp.dao.model.OrderItem">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        insert into dcdg_bussiness_order_item (CHILD_ID, ORDER_ID, GOODS_ID,
        GOODS_NAME, GOODS_IMG, SKU_NO,
        SKU_VALUE, SUPPLY_PRICE, PUTAWAY_PRICE,
        GOODS_NUM, TOTAL_FEE, ADJUST_FEE,
        DISCOUNTS_FEE, DISCOUNTS_DESC, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, ADD_TIME,
        UPDATE_TIME, POST_COMPANY, POST_NO,
        CAT_PATH)
        values (#{childId,jdbcType=CHAR}, #{orderId,jdbcType=CHAR}, #{goodsId,jdbcType=CHAR},
        #{goodsName,jdbcType=VARCHAR}, #{goodsImg,jdbcType=VARCHAR}, #{skuNo,jdbcType=VARCHAR},
        #{skuValue,jdbcType=VARCHAR}, #{supplyPrice,jdbcType=DOUBLE}, #{putawayPrice,jdbcType=DOUBLE},
        #{goodsNum,jdbcType=INTEGER}, #{totalFee,jdbcType=DOUBLE}, #{adjustFee,jdbcType=DOUBLE},
        #{discountsFee,jdbcType=DOUBLE}, #{discountsDesc,jdbcType=VARCHAR}, #{postFee,jdbcType=DOUBLE},
        #{installFee,jdbcType=DOUBLE}, #{distributorId,jdbcType=VARCHAR}, #{addTime,jdbcType=TIMESTAMP},
        #{updateTime,jdbcType=TIMESTAMP}, #{postCompany,jdbcType=VARCHAR}, #{postNo,jdbcType=VARCHAR},
        #{catPath,jdbcType=VARCHAR})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.louquanapp.dao.model.OrderItem">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        update dcdg_bussiness_order_item
        set ORDER_ID = #{orderId,jdbcType=CHAR},
        GOODS_ID = #{goodsId,jdbcType=CHAR},
        GOODS_NAME = #{goodsName,jdbcType=VARCHAR},
        GOODS_IMG = #{goodsImg,jdbcType=VARCHAR},
        SKU_NO = #{skuNo,jdbcType=VARCHAR},
        SKU_VALUE = #{skuValue,jdbcType=VARCHAR},
        SUPPLY_PRICE = #{supplyPrice,jdbcType=DOUBLE},
        PUTAWAY_PRICE = #{putawayPrice,jdbcType=DOUBLE},
        GOODS_NUM = #{goodsNum,jdbcType=INTEGER},
        TOTAL_FEE = #{totalFee,jdbcType=DOUBLE},
        ADJUST_FEE = #{adjustFee,jdbcType=DOUBLE},
        DISCOUNTS_FEE = #{discountsFee,jdbcType=DOUBLE},
        DISCOUNTS_DESC = #{discountsDesc,jdbcType=VARCHAR},
        POST_FEE = #{postFee,jdbcType=DOUBLE},
        INSTALL_FEE = #{installFee,jdbcType=DOUBLE},
        DISTRIBUTOR_ID = #{distributorId,jdbcType=VARCHAR},
        ADD_TIME = #{addTime,jdbcType=TIMESTAMP},
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
        POST_COMPANY = #{postCompany,jdbcType=VARCHAR},
        POST_NO = #{postNo,jdbcType=VARCHAR},
        CAT_PATH = #{catPath,jdbcType=VARCHAR}
        where CHILD_ID = #{childId,jdbcType=CHAR}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        select CHILD_ID, ORDER_ID, GOODS_ID, GOODS_NAME, GOODS_IMG, SKU_NO, SKU_VALUE, SUPPLY_PRICE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, DISCOUNTS_DESC, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, ADD_TIME, UPDATE_TIME, POST_COMPANY, POST_NO, CAT_PATH
        from dcdg_bussiness_order_item
        where CHILD_ID = #{childId,jdbcType=CHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Mon Apr 08 15:18:24 CST 2019.
        -->
        select CHILD_ID, ORDER_ID, GOODS_ID, GOODS_NAME, GOODS_IMG, SKU_NO, SKU_VALUE, SUPPLY_PRICE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, DISCOUNTS_DESC, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, ADD_TIME, UPDATE_TIME, POST_COMPANY, POST_NO, CAT_PATH
        from dcdg_bussiness_order_item
    </select>


    <select id="getOrderItemByOrderIds" parameterType="java.util.List" resultMap="BaseResultMap">
        select CHILD_ID, ORDER_ID,GOODS_ID,GOODS_NAME, GOODS_IMG, SKU_NO,SKU_VALUE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, POST_COMPANY, POST_NO,CAT_PATH
        from dcdg_bussiness_order_item where ORDER_ID IN
        <foreach collection="list" item="id" open="(" separator=","
                 close=")">#{id}
        </foreach>
        ORDER BY ADD_TIME DESC
    </select>


    <insert id="batchInsert" parameterType="java.util.List">
        INSERT INTO dcdg_bussiness_order_item (CHILD_ID, ORDER_ID, GOODS_ID,
        GOODS_NAME, GOODS_IMG, SKU_NO,
        SKU_VALUE, SUPPLY_PRICE, PUTAWAY_PRICE,
        GOODS_NUM, TOTAL_FEE, ADJUST_FEE,
        DISCOUNTS_FEE, DISCOUNTS_DESC, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, ADD_TIME,
        UPDATE_TIME, POST_COMPANY, POST_NO,CAT_PATH)
        VALUES
        <foreach collection="list" index="index" item="item" separator=",">
            (#{item.childId,jdbcType=CHAR}, #{item.orderId,jdbcType=CHAR}, #{item.goodsId,jdbcType=CHAR},
            #{item.goodsName,jdbcType=VARCHAR}, #{item.goodsImg,jdbcType=VARCHAR}, #{item.skuNo,jdbcType=VARCHAR},
            #{item.skuValue,jdbcType=VARCHAR}, #{item.supplyPrice,jdbcType=DOUBLE},
            #{item.putawayPrice,jdbcType=DOUBLE},
            #{item.goodsNum,jdbcType=INTEGER}, #{item.totalFee,jdbcType=DOUBLE}, #{item.adjustFee,jdbcType=DOUBLE},
            #{item.discountsFee,jdbcType=DOUBLE}, #{item.discountsDesc,jdbcType=VARCHAR},
            #{item.postFee,jdbcType=DOUBLE},
            #{item.installFee,jdbcType=DOUBLE}, #{item.distributorId,jdbcType=VARCHAR},
            #{item.addTime,jdbcType=TIMESTAMP},
            #{item.updateTime,jdbcType=TIMESTAMP}, #{item.postCompany,jdbcType=VARCHAR},
            #{item.postNo,jdbcType=VARCHAR}, #{item.catPath,jdbcType=VARCHAR}
            )
        </foreach>
    </insert>


    <select id="getCountByOrderId" parameterType="java.lang.String" resultType="java.lang.Integer">
        select COUNT(1) from dcdg_bussiness_order_item WHERE ORDER_ID = #{orderId,jdbcType=CHAR}
    </select>

    <select id="getOrderItemByOrderId" parameterType="string" resultMap="BaseResultMap">
        select CHILD_ID, ORDER_ID,GOODS_ID,GOODS_NAME, GOODS_IMG, SKU_NO,SKU_VALUE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID,  POST_COMPANY, POST_NO,CAT_PATH
        from dcdg_bussiness_order_item where ORDER_ID = #{orderId,jdbcType=CHAR} ORDER BY ADD_TIME DESC
    </select>

    <select id="getOrderByOrderIds" parameterType="java.util.List" resultMap="BaseResultMap">
        select CHILD_ID, ORDER_ID,GOODS_ID,GOODS_NAME, GOODS_IMG, SKU_NO,SKU_VALUE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, POST_COMPANY, POST_NO
        from dcdg_bussiness_order_item
        <where>
            <if test="list != null and list.size()>0">
                AND ORDER_ID in
                <foreach close=")" collection="list" item="id" open="(" separator=",">#{id}
                </foreach>
            </if>
        </where>

        ORDER BY ADD_TIME DESC
    </select>

    <select id="getOrderItemByOrderIdsSh" parameterType="java.util.List" resultMap="BaseResultMap">
        select CHILD_ID, ORDER_ID,GOODS_ID,GOODS_NAME, GOODS_IMG, SKU_NO,SKU_VALUE,
        PUTAWAY_PRICE, GOODS_NUM, TOTAL_FEE, ADJUST_FEE, DISCOUNTS_FEE, POST_FEE,
        INSTALL_FEE, DISTRIBUTOR_ID, POST_COMPANY, POST_NO
        from dcdg_bussiness_order_item where CHILD_ID in(select CHILD_ID from dcdg_bussiness_order_return)
        <if test="list != null and list.size()>0">
            AND ORDER_ID in
            <foreach close=")" collection="list" item="id" open="(" separator=",">#{id}
            </foreach>
        </if>
        ORDER BY ADD_TIME DESC
    </select>


    <update id="updateItemForSendGoods" >
        update dcdg_bussiness_order_item set ORDER_ID = #{orderId,jdbcType=CHAR}
                ,POST_COMPANY = #{postCompany,jdbcType=VARCHAR},POST_NO = #{postNo,jdbcType=VARCHAR}
         where CHILD_ID = #{childId,jdbcType=CHAR}
    </update>
    <select id="getGoodsImgByOrderId"  resultType="String">
        select GOODS_IMG  from dcdg_bussiness_order_item where ORDER_ID = #{orderId,jdbcType=CHAR}
    </select>


</mapper>