<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.louquanapp.dao.mapper.ShipAddressMapper">
    <resultMap id="BaseResultMap" type="com.louquanapp.dao.model.ShipAddress">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        <id column="SHIP_ID" jdbcType="CHAR" property="shipId"/>
        <result column="CUST_ID" jdbcType="CHAR" property="custId"/>
        <result column="RECEIVER_NAME" jdbcType="VARCHAR" property="receiverName"/>
        <result column="AREA_PATH" jdbcType="VARCHAR" property="areaPath"/>
        <result column="RECEIVE_ADDR" jdbcType="VARCHAR" property="receiveAddr"/>
        <result column="LINK_PHONE" jdbcType="VARCHAR" property="linkPhone"/>
        <result column="FIXED_PHONE" jdbcType="VARCHAR" property="fixedPhone"/>
        <result column="EMAIL" jdbcType="VARCHAR" property="email"/>
        <result column="POST_CODE" jdbcType="VARCHAR" property="postCode"/>
        <result column="DEFAULT_FLAG" jdbcType="TINYINT" property="defaultFlag"/>
        <result column="ADD_TIME" jdbcType="TIMESTAMP" property="addTime"/>
        <result column="UPDATE_TIME" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        delete from dcdg_bussiness_customer_shipaddress
        where SHIP_ID = #{shipId,jdbcType=CHAR}
    </delete>
    <insert id="insert" parameterType="com.louquanapp.dao.model.ShipAddress">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        insert into dcdg_bussiness_customer_shipaddress (SHIP_ID, CUST_ID, RECEIVER_NAME,
        AREA_PATH, RECEIVE_ADDR, LINK_PHONE,
        FIXED_PHONE, EMAIL, POST_CODE,
        DEFAULT_FLAG, ADD_TIME, UPDATE_TIME
        )
        values (#{shipId,jdbcType=CHAR}, #{custId,jdbcType=CHAR}, #{receiverName,jdbcType=VARCHAR},
        #{areaPath,jdbcType=VARCHAR}, #{receiveAddr,jdbcType=VARCHAR}, #{linkPhone,jdbcType=VARCHAR},
        #{fixedPhone,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{postCode,jdbcType=VARCHAR},
        #{defaultFlag,jdbcType=TINYINT}, #{addTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}
        )
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.louquanapp.dao.model.ShipAddress">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        update dcdg_bussiness_customer_shipaddress
        set CUST_ID = #{custId,jdbcType=CHAR},
        RECEIVER_NAME = #{receiverName,jdbcType=VARCHAR},
        AREA_PATH = #{areaPath,jdbcType=VARCHAR},
        RECEIVE_ADDR = #{receiveAddr,jdbcType=VARCHAR},
        LINK_PHONE = #{linkPhone,jdbcType=VARCHAR},
        FIXED_PHONE = #{fixedPhone,jdbcType=VARCHAR},
        EMAIL = #{email,jdbcType=VARCHAR},
        POST_CODE = #{postCode,jdbcType=VARCHAR},
        DEFAULT_FLAG = #{defaultFlag,jdbcType=TINYINT},
        ADD_TIME = #{addTime,jdbcType=TIMESTAMP},
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP}
        where SHIP_ID = #{shipId,jdbcType=CHAR}
    </update>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        select SHIP_ID, CUST_ID, RECEIVER_NAME, AREA_PATH, RECEIVE_ADDR, LINK_PHONE, FIXED_PHONE,
        EMAIL, POST_CODE, DEFAULT_FLAG, ADD_TIME, UPDATE_TIME
        from dcdg_bussiness_customer_shipaddress
        where SHIP_ID = #{shipId,jdbcType=CHAR}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Mar 29 12:56:58 CST 2019.
        -->
        select SHIP_ID, CUST_ID, RECEIVER_NAME, AREA_PATH, RECEIVE_ADDR, LINK_PHONE, FIXED_PHONE,
        EMAIL, POST_CODE, DEFAULT_FLAG, ADD_TIME, UPDATE_TIME
        from dcdg_bussiness_customer_shipaddress
    </select>


    <sql id="Base_Column_List">
    SHIP_ID, CUST_ID, RECEIVER_NAME, AREA_PATH, RECEIVE_ADDR, LINK_PHONE, FIXED_PHONE,
    EMAIL, POST_CODE, DEFAULT_FLAG
  </sql>


    <select id="selectAllByCustId" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from dcdg_bussiness_customer_shipaddress
        where CUST_ID = #{custId,jdbcType=CHAR} ORDER BY DEFAULT_FLAG,SHIP_ID DESC
    </select>

    <select id="getDefaultByCustId" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from dcdg_bussiness_customer_shipaddress
        where CUST_ID = #{custId,jdbcType=CHAR} AND DEFAULT_FLAG=1
    </select>

    <select id="getAddressByCustIdAndShipId" resultMap="BaseResultMap" parameterType="java.util.Map">
        select
        <include refid="Base_Column_List"/>
        from dcdg_bussiness_customer_shipaddress
        where CUST_ID = #{custId,jdbcType=CHAR} AND SHIP_ID = #{shipId,jdbcType=CHAR}
    </select>

    <delete id="delAddressByCustIdAndShipId" parameterType="java.util.Map">
        delete from dcdg_bussiness_customer_shipaddress
        where SHIP_ID = #{shipId,jdbcType=CHAR} AND CUST_ID = #{custId,jdbcType=CHAR}
    </delete>

    <delete id="delAddressByCustIdAndShipIds" parameterType="java.util.Map">
        delete from dcdg_bussiness_customer_shipaddress
        where CUST_ID = #{custId,jdbcType=CHAR}
        <if test="shipIds != null and shipIds.size()>0">
            AND SHIP_ID in
            <foreach collection="shipIds" item="id" open="(" separator=","
                     close=")">#{id}
            </foreach>
        </if>
    </delete>

    <update id="setAllToNotDefaultByCustId" parameterType="java.lang.String">
      UPDATE  dcdg_bussiness_customer_shipaddress SET DEFAULT_FLAG=2 where CUST_ID = #{custId,jdbcType=CHAR} AND DEFAULT_FLAG=1
    </update>

    <update id="setCurrentUserDefaultAddr" parameterType="java.lang.String">
      UPDATE  dcdg_bussiness_customer_shipaddress SET DEFAULT_FLAG=1  where SHIP_ID = #{shipId,jdbcType=CHAR}
    </update>

    <update id="updateByPrimaryKeyAndCustIdSelective" parameterType="com.louquanapp.dao.model.ShipAddress">
        UPDATE dcdg_bussiness_customer_shipaddress
        <set>
            <if test="receiverName != null">
                RECEIVER_NAME=#{receiverName,jdbcType=VARCHAR},
            </if>
            <if test="areaPath != null">
                AREA_PATH=#{areaPath,jdbcType=VARCHAR},
            </if>
            <if test="receiveAddr != null">
                RECEIVE_ADDR=#{receiveAddr,jdbcType=VARCHAR},
            </if>
            <if test="linkPhone != null">
                LINK_PHONE=#{linkPhone,jdbcType=VARCHAR},
            </if>
            <if test="fixedPhone != null">
                FIXED_PHONE=#{fixedPhone,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                EMAIL=#{email,jdbcType=VARCHAR},
            </if>
            <if test="postCode != null">
                POST_CODE=#{postCode,jdbcType=VARCHAR},
            </if>
            <if test="defaultFlag != null">
                DEFAULT_FLAG=#{defaultFlag,jdbcType=TINYINT},
            </if>
            <if test="addTime != null">
                ADD_TIME=#{addTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                UPDATE_TIME=#{updateTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        WHERE SHIP_ID =
        #{shipId,jdbcType=CHAR} and CUST_ID = #{custId,jdbcType=CHAR}
    </update>


    <select id="countAllByCustId" parameterType="java.lang.String" resultType="int">
     select count(1)
    from dcdg_bussiness_customer_shipaddress
    where CUST_ID = #{custId,jdbcType=CHAR}
  </select>
</mapper>